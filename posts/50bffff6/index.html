<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"><title>使用iptables屏蔽攻击者访问者ip | 雪豹妙妙屋</title><meta name="author" content="雪豹"><meta name="copyright" content="雪豹"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="通过设置iptables来屏蔽特定攻击者ip，减轻服务器压力"><meta property="og:type" content="article"><meta property="og:title" content="使用iptables屏蔽攻击者访问者ip"><meta property="og:url" content="https://srto.win/posts/50bffff6/"><meta property="og:site_name" content="雪豹妙妙屋"><meta property="og:description" content="通过设置iptables来屏蔽特定攻击者ip，减轻服务器压力"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://srto.win/asst/imgs/50bffff6.webp"><meta property="article:published_time" content="2020-05-28T21:35:09.000Z"><meta property="article:modified_time" content="2020-05-28T21:35:09.000Z"><meta property="article:author" content="雪豹"><meta property="article:tag" content="Linux"><meta property="article:tag" content="iptables"><meta property="article:tag" content="防火墙"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://srto.win/asst/imgs/50bffff6.webp"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "使用iptables屏蔽攻击者访问者ip",
  "url": "https://srto.win/posts/50bffff6/",
  "image": "https://srto.win/asst/imgs/50bffff6.webp",
  "datePublished": "2020-05-28T21:35:09.000Z",
  "dateModified": "2020-05-28T21:35:09.000Z",
  "author": [
    {
      "@type": "Person",
      "name": "雪豹",
      "url": "https://srto.win"
    }
  ]
}</script><link rel="shortcut icon" href="/imgs/favicon.png"><link rel="canonical" href="https://srto.win/posts/50bffff6/"><link rel="preconnect" href="//cdnjs.cloudflare.com"><link rel="manifest" href="/imgs/pwa/manifest.json"><link rel="apple-touch-icon" sizes="180x180" href="/imgs/icons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/imgs/pwa/32.png"><link rel="icon" type="image/png" sizes="16x16" href="/imgs/pwa/16.png"><link rel="mask-icon" href="/imgs/icons/safari-pinned-tab.svg" color="#5bbad5"><link rel="stylesheet" href="/css/index.css?v=5.5.0"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/node-snackbar/0.1.16/snackbar.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/6.0.29/fancybox/fancybox.min.css" media="print" onload='this.media="all"'><script>(()=>{const t={set:(e,t,o)=>{if(!o)return;const a=Date.now()+864e5*o;localStorage.setItem(e,JSON.stringify({value:t,expiry:a}))},get:e=>{const t=localStorage.getItem(e);if(!t)return;const{value:o,expiry:a}=JSON.parse(t);if(!(Date.now()>a))return o;localStorage.removeItem(e)}};window.btf={saveToLocal:t,getScript:(e,t={})=>new Promise(((o,a)=>{const n=document.createElement("script");n.src=e,n.async=!0,Object.entries(t).forEach((([e,t])=>n.setAttribute(e,t))),n.onload=n.onreadystatechange=()=>{n.readyState&&!/loaded|complete/.test(n.readyState)||o()},n.onerror=a,document.head.appendChild(n)})),getCSS:(e,t)=>new Promise(((o,a)=>{const n=document.createElement("link");n.rel="stylesheet",n.href=e,t&&(n.id=t),n.onload=n.onreadystatechange=()=>{n.readyState&&!/loaded|complete/.test(n.readyState)||o()},n.onerror=a,document.head.appendChild(n)})),addGlobalFn:(e,t,o=!1,a=window)=>{if(e.startsWith("pjax"))return;const n=a.globalFn||{};n[e]=n[e]||{},n[e][o||Object.keys(n[e]).length]=t,a.globalFn=n}};const o=()=>{document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","undefined")},a=()=>{document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","undefined")};btf.activateDarkMode=o,btf.activateLightMode=a;const n=t.get("theme"),r=window.matchMedia("(prefers-color-scheme: dark)"),c=window.matchMedia("(prefers-color-scheme: light)");if(void 0===n){if(c.matches)a();else if(r.matches)o();else{const e=(new Date).getHours();e<=6||e>=18?o():a()}r.addEventListener("change",(()=>{void 0===t.get("theme")&&(e.matches?o():a())}))}else"light"===n?a():o();const d=t.get("aside-status");void 0!==d&&document.documentElement.classList.toggle("hide-aside","hide"===d);/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})()</script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>const GLOBAL_CONFIG={root:"/",algolia:{appId:"RKRAY4BZRS",apiKey:"99e235ffccb31bffbeb25bbef5708773",indexName:"ifibe_search",hitsPerPage:6,languages:{hits_empty:"未找到符合您查询的内容：${query}",hits_stats:"找到 ${hits} 条结果，耗时 ${time} 毫秒"}},localSearch:void 0,translate:void 0,highlight:{plugin:"highlight.js",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:!1,highlightFullpage:!1,highlightMacStyle:!0},copy:{success:"复制成功",error:"复制失败",noSupport:"浏览器不支持"},relativeDate:{homepage:!1,post:!1},runtime:"",dateSuffix:{just:"刚刚",min:"分钟前",hour:"小时前",day:"天前",month:"个月前"},copyright:void 0,lightbox:"fancybox",Snackbar:{chs_to_cht:"已切换为繁体中文",cht_to_chs:"已切换为简体中文",day_to_night:"已切换为深色模式",night_to_day:"已切换为浅色模式",bgLight:"#9F79EE",bgDark:"#1f1f1f",position:"bottom-left"},infinitegrid:{js:"https://cdnjs.cloudflare.com/ajax/libs/egjs-infinitegrid/4.12.0/infinitegrid.min.js",buttonText:"加载更多"},isPhotoFigcaption:!1,islazyloadPlugin:!0,isAnchor:!1,percent:{toc:!0,rightside:!1},autoDarkmode:!0}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"使用iptables屏蔽攻击者访问者ip",isHighlightShrink:!1,isToc:!0,pageType:"post"}</script><meta name="generator" content="Hexo 8.0.0"><link rel="alternate" href="/atom.xml" title="雪豹妙妙屋" type="application/atom+xml"></head><body><div id="web_bg" style="background-image:url(/asst/imgs/bg3.webp)"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/imgs/loading.gif" data-lazy-src="/asst/imgs/avatar.webp" onerror='this.onerror=null,this.src="/imgs/friend_404.gif"' alt="avatar"></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">34</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">63</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">10</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i> <span>主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i> <span>存档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i> <span>分类</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i> <span>更多</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i> <span>音乐</span></a></li><li><a class="site-page child" href="/photo/"><i class="fa-fw fas fa-images"></i> <span>相册</span></a></li><li><a class="site-page child" href="/kmstool/"><i class="fa-fw fas fa-key"></i> <span>KMS工具</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i> <span>链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i> <span>关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg fixed" id="page-header" style="background:0 0"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">雪豹妙妙屋</span></a><a class="nav-page-title" href="/"><span class="site-name">使用iptables屏蔽攻击者访问者ip</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i> <span>返回首页</span></span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i> <span>搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i> <span>主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i> <span>存档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i> <span>分类</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i> <span>更多</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i> <span>音乐</span></a></li><li><a class="site-page child" href="/photo/"><i class="fa-fw fas fa-images"></i> <span>相册</span></a></li><li><a class="site-page child" href="/kmstool/"><i class="fa-fw fas fa-key"></i> <span>KMS工具</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i> <span>链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i> <span>关于</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">使用iptables屏蔽攻击者访问者ip</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2020-05-28T21:35:09.000Z" title="发表于 2020-05-28 21:35:09">2020-05-28</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2020-05-28T21:35:09.000Z" title="更新于 2020-05-28 21:35:09">2020-05-28</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%95%99%E7%A8%8B/">教程</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%95%99%E7%A8%8B/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/">网络安全</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">1.1k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>5分钟</span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><div id="post-outdate-notice" data="{&quot;limitDay&quot;:365,&quot;messagePrev&quot;:&quot;这篇文章距离上次更新已经有&quot;,&quot;messageNext&quot;:&quot;天了，文章内容可能与实际情况不同！&quot;,&quot;postUpdate&quot;:&quot;2020-05-28 21:35:09&quot;}" hidden></div><blockquote><p>最近一次检查服务器应用运行情况时在应用 log 中发现大量不寻常的指向访问（大量某皇家 xx 流量），同时网卡出口方向负载异常。于是通过 netstat 排查出入流量，同时使用 iptables 将垃圾流量地址屏蔽，减轻应用运行负载，提高运行体验。（也可自行编写 shell 将大流量相同访问自动屏蔽，但可能影响用户访问，本文介绍应对普通攻击时的手动操作方法）</p></blockquote><h2 id="安装-iptables"><a href="#安装-iptables" class="headerlink" title="安装 iptables"></a>安装 iptables</h2><p>演示环境为 Ubuntu 18.04</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ apt-get install iptables -y</span><br></pre></td></tr></table></figure><p>查看 iptables 版本</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ iptables -V</span><br></pre></td></tr></table></figure><h2 id="使用-netstat-排查流量"><a href="#使用-netstat-排查流量" class="headerlink" title="使用 netstat 排查流量"></a>使用 netstat 排查流量</h2><h3 id="检查特定端口的-ip-连接情况"><a href="#检查特定端口的-ip-连接情况" class="headerlink" title="检查特定端口的 ip 连接情况"></a>检查特定端口的 ip 连接情况</h3><p>以应用运行在 80 端口为例<br>列出 80 端口正被哪些 ip 访问</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$  netstat -tun | grep <span class="string">&quot;:80&quot;</span></span><br></pre></td></tr></table></figure><p>列出访问 80 端口前 10 的 ip 地址，并显示连接数</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ netstat -antp | awk <span class="string">&#x27;$4 ~ /:80$/ &#123;print $4&quot; &quot;$5&#125;&#x27;</span> | awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span>|awk -F : &#123;<span class="string">&#x27;print $1&#x27;</span>&#125; | <span class="built_in">uniq</span> -c | <span class="built_in">sort</span> -nr | <span class="built_in">head</span> -n 10</span><br></pre></td></tr></table></figure><p>列出所有访问 80 端口的 ip 地址，并显示连接数</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ netstat -plan|grep :80|awk &#123;<span class="string">&#x27;print $5&#x27;</span>&#125;|<span class="built_in">cut</span> -d: -f 1|<span class="built_in">sort</span>|<span class="built_in">uniq</span> -c|<span class="built_in">sort</span> -nk 1</span><br></pre></td></tr></table></figure><p><img src="/imgs/loading.gif" data-lazy-src="https://srto.win/asst/imgs/netstat80.webp" alt="netstat" title="netstat"></p><h3 id="全部连接情况"><a href="#全部连接情况" class="headerlink" title="全部连接情况"></a>全部连接情况</h3><p>显示所有的网络活动</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ netstat -na</span><br></pre></td></tr></table></figure><p>显示连接数多的 ip</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ netstat -an|awk -F: <span class="string">&#x27;&#123;print $2&#125;&#x27;</span>|<span class="built_in">sort</span>|<span class="built_in">uniq</span> -c|<span class="built_in">sort</span> -nr|<span class="built_in">head</span></span><br></pre></td></tr></table></figure><p>列出所有经过的 ip</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ netstat -n -p | grep SYN_REC | <span class="built_in">sort</span> -u</span><br></pre></td></tr></table></figure><p>计算每个 ip 发起的连接数</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ netstat -ntu | awk <span class="string">&#x27;&#123;print $5&#125;&#x27;</span> | <span class="built_in">cut</span> -d: -f1 | <span class="built_in">sort</span> | <span class="built_in">uniq</span> -c | <span class="built_in">sort</span> -n</span><br></pre></td></tr></table></figure><h2 id="使用-iptables-屏蔽特定访问"><a href="#使用-iptables-屏蔽特定访问" class="headerlink" title="使用 iptables 屏蔽特定访问"></a>使用 iptables 屏蔽特定访问</h2><h3 id="显示当前的防火墙规则"><a href="#显示当前的防火墙规则" class="headerlink" title="显示当前的防火墙规则"></a>显示当前的防火墙规则</h3><p>以主机名方式显示规则</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ iptables -L</span><br></pre></td></tr></table></figure><p>以 ip 显示显示规则</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ iptables -L -n</span><br></pre></td></tr></table></figure><h3 id="屏蔽特定-ip"><a href="#屏蔽特定-ip" class="headerlink" title="屏蔽特定 ip"></a>屏蔽特定 ip</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ iptables -I INPUT -s ***.***.***.*** -j DROP</span><br></pre></td></tr></table></figure><p>例如</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ iptables -I INPUT -s 202.60.228.135 -j DROP</span><br><span class="line">$ iptables -I INPUT -s 47.112.148.83 -j DROP</span><br><span class="line">$ iptables -I INPUT -s 208.115.232.242 -j DROP</span><br><span class="line">$ iptables -I INPUT -s 63.143.61.22 -j DROP</span><br></pre></td></tr></table></figure><h3 id="屏蔽一条-ip-段"><a href="#屏蔽一条-ip-段" class="headerlink" title="屏蔽一条 ip 段"></a>屏蔽一条 ip 段</h3><p>如果恶意访问的 ip 来自同一机房，可直接将机房 ip 段屏蔽</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ iptables -I INPUT -s ***.***.***.***/24 -j DROP</span><br></pre></td></tr></table></figure><p>例如</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ iptables -I INPUT -s 1.2.3.0/24 -j DROP</span><br></pre></td></tr></table></figure><h3 id="释放屏蔽的-ip"><a href="#释放屏蔽的-ip" class="headerlink" title="释放屏蔽的 ip"></a>释放屏蔽的 ip</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ iptables -D INPUT -s ***.***.***.*** -j DROP</span><br></pre></td></tr></table></figure><p>同上</p><blockquote><p>配置完成后可使用<code>iptables -L -n</code>检查规则</p></blockquote><h3 id="防火墙操作"><a href="#防火墙操作" class="headerlink" title="防火墙操作"></a>防火墙操作</h3><p>使用<code>iptables-save</code>保存此次修改<br>配置每次启动自动生效上一次的防火墙规则</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ iptables-save &gt; /etc/iptables.rules</span><br></pre></td></tr></table></figure><p>编辑<code>/etc/network/interfaces</code>文件，在末尾加上</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pre-up iptables-restore &lt; /etc/iptables.rules</span><br></pre></td></tr></table></figure><p>每次修改 iptables 规则后，执行一次<code>iptables-save &gt; /etc/iptables.rules</code>来保存规则。</p><hr><h3 id="iptables-帮助"><a href="#iptables-帮助" class="headerlink" title="iptables 帮助"></a>iptables 帮助</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">$ iptables --<span class="built_in">help</span></span><br><span class="line">iptables v1.6.1</span><br><span class="line"></span><br><span class="line">Usage: iptables -[ACD] chain rule-specification [options]</span><br><span class="line">       iptables -I chain [rulenum] rule-specification [options]</span><br><span class="line">       iptables -R chain rulenum rule-specification [options]</span><br><span class="line">       iptables -D chain rulenum [options]</span><br><span class="line">       iptables -[LS] [chain [rulenum]] [options]</span><br><span class="line">       iptables -[FZ] [chain] [options]</span><br><span class="line">       iptables -[NX] chain</span><br><span class="line">       iptables -E old-chain-name new-chain-name</span><br><span class="line">       iptables -P chain target [options]</span><br><span class="line">       iptables -h (<span class="built_in">print</span> this <span class="built_in">help</span> information)</span><br><span class="line"></span><br><span class="line">Commands:</span><br><span class="line">Either long or short options are allowed.</span><br><span class="line">  --append  -A chain		Append to chain</span><br><span class="line">  --check   -C chain		Check <span class="keyword">for</span> the existence of a rule</span><br><span class="line">  --delete  -D chain		Delete matching rule from chain</span><br><span class="line">  --delete  -D chain rulenum</span><br><span class="line">				Delete rule rulenum (1 = first) from chain</span><br><span class="line">  --insert  -I chain [rulenum]</span><br><span class="line">				Insert <span class="keyword">in</span> chain as rulenum (default 1=first)</span><br><span class="line">  --replace -R chain rulenum</span><br><span class="line">				Replace rule rulenum (1 = first) <span class="keyword">in</span> chain</span><br><span class="line">  --list    -L [chain [rulenum]]</span><br><span class="line">				List the rules <span class="keyword">in</span> a chain or all chains</span><br><span class="line">  --list-rules -S [chain [rulenum]]</span><br><span class="line">				Print the rules <span class="keyword">in</span> a chain or all chains</span><br><span class="line">  --flush   -F [chain]		Delete all rules <span class="keyword">in</span>  chain or all chains</span><br><span class="line">  --zero    -Z [chain [rulenum]]</span><br><span class="line">				Zero counters <span class="keyword">in</span> chain or all chains</span><br><span class="line">  --new     -N chain		Create a new user-defined chain</span><br><span class="line">  --delete-chain</span><br><span class="line">            -X [chain]		Delete a user-defined chain</span><br><span class="line">  --policy  -P chain target</span><br><span class="line">				Change policy on chain to target</span><br><span class="line">  --rename-chain</span><br><span class="line">            -E old-chain new-chain</span><br><span class="line">				Change chain name, (moving any references)</span><br><span class="line">Options:</span><br><span class="line">    --ipv4	-4		Nothing (line is ignored by ip6tables-restore)</span><br><span class="line">    --ipv6	-6		Error (line is ignored by iptables-restore)</span><br><span class="line">[!] --protocol	-p proto	protocol: by number or name, eg. `tcp<span class="string">&#x27;</span></span><br><span class="line"><span class="string">[!] --source	-s address[/mask][...]</span></span><br><span class="line"><span class="string">				source specification</span></span><br><span class="line"><span class="string">[!] --destination -d address[/mask][...]</span></span><br><span class="line"><span class="string">				destination specification</span></span><br><span class="line"><span class="string">[!] --in-interface -i input name[+]</span></span><br><span class="line"><span class="string">				network interface name ([+] for wildcard)</span></span><br><span class="line"><span class="string"> --jump	-j target</span></span><br><span class="line"><span class="string">				target for rule (may load target extension)</span></span><br><span class="line"><span class="string">  --goto      -g chain</span></span><br><span class="line"><span class="string">                              jump to chain with no return</span></span><br><span class="line"><span class="string">  --match	-m match</span></span><br><span class="line"><span class="string">				extended match (may load extension)</span></span><br><span class="line"><span class="string">  --numeric	-n		numeric output of addresses and ports</span></span><br><span class="line"><span class="string">[!] --out-interface -o output name[+]</span></span><br><span class="line"><span class="string">				network interface name ([+] for wildcard)</span></span><br><span class="line"><span class="string">  --table	-t table	table to manipulate (default: `filter&#x27;</span>)</span><br><span class="line">  --verbose	-v		verbose mode</span><br><span class="line">  --<span class="built_in">wait</span>	-w [seconds]	maximum <span class="built_in">wait</span> to acquire xtables lock before give up</span><br><span class="line">  --wait-interval -W [usecs]	<span class="built_in">wait</span> time to try to acquire xtables lock</span><br><span class="line">				default is 1 second</span><br><span class="line">  --line-numbers		<span class="built_in">print</span> line numbers when listing</span><br><span class="line">  --exact	-x		<span class="built_in">expand</span> numbers (display exact values)</span><br><span class="line">[!] --fragment	-f		match second or further fragments only</span><br><span class="line">  --modprobe=&lt;<span class="built_in">command</span>&gt;		try to insert modules using this <span class="built_in">command</span></span><br><span class="line">  --set-counters PKTS BYTES	<span class="built_in">set</span> the counter during insert/append</span><br><span class="line">[!] --version	-V		<span class="built_in">print</span> package version.</span><br></pre></td></tr></table></figure><div class="note info flat"><p>参考：<a href="https://help.ubuntu.com/community/IptablesHowTo" rel="external nofollow noreferrer">https://help.ubuntu.com/community/IptablesHowTo</a></p></div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者:</span> <span class="post-copyright-info"><a href="https://srto.win">雪豹</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接:</span> <span class="post-copyright-info"><a href="https://srto.win/posts/50bffff6/">https://srto.win/posts/50bffff6/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明:</span> <span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noreferrer" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://srto.win" target="_blank">雪豹妙妙屋</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Linux/">Linux</a><a class="post-meta__tags" href="/tags/iptables/">iptables</a><a class="post-meta__tags" href="/tags/%E9%98%B2%E7%81%AB%E5%A2%99/">防火墙</a></div></div><div class="ads-wrap"><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4338323940841689" data-ad-slot="2529608922" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/posts/5a8a6c8d/" title="hexo-deployer-git以token方式部署到Github"><img class="cover" src="/imgs/loading.gif" data-lazy-src="https://srto.win/asst/imgs/5a8a6c8d.webp" onerror='onerror=null,src="/imgs/404.svg"' alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">hexo-deployer-git以token方式部署到Github</div></div><div class="info-2"><div class="info-item-1">记hexo-deployer-git远程CI部署踩坑 翻车写法官方文档中关于config.yml写法 12345678910111213# You can use this:deploy: type: git repo: &lt;repository url&gt; branch: [branch] token: &#x27;&#x27; message: [message] name: [git user] email: [git email] extend_dirs: [extend directory] ignore_hidden: false # default is true ignore_pattern: regexp # whatever file that matches the regexp will be ignored when deploying 此时会因为程序读不到token而导致密钥验证失败报错 12345Logon failed, use ctrl+c to cancel basic credential prompt.re...</div></div></div></a><a class="pagination-related" href="/posts/f12078f/" title="使用NS1智能Filter Chain功能配置GeoIP分区解析"><img class="cover" src="/imgs/loading.gif" data-lazy-src="https://srto.win/asst/imgs/f12078f.webp" onerror='onerror=null,src="/imgs/404.svg"' alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">使用NS1智能Filter Chain功能配置GeoIP分区解析</div></div><div class="info-2"><div class="info-item-1">使用 NS1 智能 DNS 中的 Filter Chain 功能来实现 GeoIP 分地解析的功能。本文中使用的是 Filter Chain 中的 Geofence Country（地理围栏功能）。 配置 GeoIP设置不同的 DNS 响应分组设置两组或两组以上的 DNS 组以完成后续的 GeoIP 功能，或者分别给不同的 IP 设置相应 GeoIP Metadata 也可以达到相同的效果。 启用相应的 Filter Chain 功能这里使用到的是 Filter Chain 中的 Geofence Country（地理围栏功能），可以对不同的国家地区设置对应的 DNS 解析地址，目前仅支持对北美地区进行行政区域的详细划分，其他地区仅支持精确到国家地址。 选择Geofence Country，添加到右侧的 Active Filter 列表，并启用。 在 Filter Chain 功能表中给出了很多使用的过滤功能，可以根据自己的实际需求来配置不同的 Filter Chain 规则，例如设置宕机切换解析、地理分区解析、权重解析··· 为 DNS 分组配置相应的 GeoIP ...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/posts/51fd1e54/" title="Ubuntu配置ArchiSteamFarm挂卡"><img class="cover" src="/imgs/loading.gif" data-lazy-src="/asst/imgs/bp-8.webp" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2019-11-15</div><div class="info-item-2">Ubuntu配置ArchiSteamFarm挂卡</div></div><div class="info-2"><div class="info-item-1">ArchiSteamFarm(以下简称 ASF)是基于 SteamKit2 制作的多账户模拟运行工具。基于 ASF 可以实现全自动挂卡、完成节日活动、命令行激活、交易 BOT 等功能。将 ASF 托管在云服务器中即可实现基于 ASF 的云挂卡功能。 生成 ASF 的配置文件首先在asf.ifibe.com生成 ASF 运行所需的配置文件，分为全局配置文件ASF.JSON和 BOT 配置文件BOTNAME.JSON。请注意：asf.ifibe.com并不会为您储存任何信息，该程序甚至可以脱机运行 生成全局配置文件ASF.JSON的生成结构如下，此处主要配置 ASF 的运行行为，和管理员账户用于通过聊天窗口或 IPC 执行相应指令。 123456789101112131415161718192021222324252627282930&#123; &quot;AutoRestart&quot;: true, &quot;Blacklist&quot;: [], &quot;CommandPrefix&quot;: &quot;!&quot;, &quot...</div></div></div></a><a class="pagination-related" href="/posts/d88f890c/" title="npm和Nodejs的安装与插件更新"><img class="cover" src="/imgs/loading.gif" data-lazy-src="https://srto.win/asst/imgs/nodejs.webp" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2020-03-16</div><div class="info-item-2">npm和Nodejs的安装与插件更新</div></div><div class="info-2"><div class="info-item-1">Npm 与 Nodejs 的安装 （Ubuntu 18.04)安装1234$ sudo apt-get update #更新软件源$ sudo apt-get install nodejs #安装Nodejs$ #sudo apt-get install nodejs-legacy #旧版系统可尝试此命令$ sudo apt-get install npm #安装Npm 安装模块 n (用于 npm 的软件包管理)1$ sudo npm install -g n Npm 版本的更新检查当前安装的 Npm 版本12$ npm -v$ nodejs -v 当前的版本为 安装 Npm 更新运行(可能需要使用Sudo命令提权后操作) 12345$ npm install npm -g #更新npm$ npm install npm@latest -g #更新npm到Latest版本$ npm install npm@next -g. #更新...</div></div></div></a><a class="pagination-related" href="/posts/6e3dea81/" title="在服务器上使用Simple Torrent作为BT离线下载程序"><img class="cover" src="/imgs/loading.gif" data-lazy-src="/asst/imgs/bp-3.webp" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2020-02-26</div><div class="info-item-2">在服务器上使用Simple Torrent作为BT离线下载程序</div></div><div class="info-2"><div class="info-item-1">Simple Torrent 是基于 Cloud Torrent 二开的应用程序，可以配置在服务器中作为远程下载器使用。搭配自身的 donecmd 功能可以调用外部命令实现下载完成后自动上传到 Onedrive 等网盘中。同时还具有 BT 加密下载、种子订阅等功能。 安装 Simple Torrent在控制台执行 1$ bash &lt;(wget -qO- https://raw.githubusercontent.com/boypt/simple-torrent/master/scripts/quickinstall.sh) 即可完成安装，服务将运行在ip:3000端口上 管理 Simple Torrent命令 1234$ systemctl start cloud-torrent #启动程序$ systemctl restart cloud-torrent #重启程序$ systemctl stop cloud-torrent #停止程序$ systemctl status cloud-torrent #查看状态 验证相关在程序更...</div></div></div></a><a class="pagination-related" href="/posts/45838d50/" title="Ubuntu设置使用SSH密钥远程登陆管理"><img class="cover" src="/imgs/loading.gif" data-lazy-src="/asst/imgs/bp-2.webp" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2020-02-18</div><div class="info-item-2">Ubuntu设置使用SSH密钥远程登陆管理</div></div><div class="info-2"><div class="info-item-1">普通密码登录方式容易被暴力破解存在安全风险，通过设置密钥登录 SSH 可以提高服务器的安全性能，便于更好的管理。 在服务器上生成新的密钥对生成密钥控制台输入 1$ ssh-keygen &lt;== 建立密钥对 输出内容 123456789Generating public/private rsa key pair.Enter file in which to save the key (/root/.ssh/id_rsa): &lt;== 按 EnterCreated directory &#x27;/root/.ssh&#x27;.Enter passphrase (empty for no passphrase): &lt;== 输入密钥锁码，或直接按 Enter 留空Enter same passphrase again: &lt;== 再输入一遍密钥锁码Your identification has been saved in /root/.ssh/id_rsa. &lt;== 私钥Your public key has been saved in /root...</div></div></div></a><a class="pagination-related" href="/posts/5e3ed708/" title="Ubuntu下调整SWAP交换空间"><img class="cover" src="/imgs/loading.gif" data-lazy-src="https://srto.win/asst/imgs/ubuntu.webp" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2020-01-28</div><div class="info-item-2">Ubuntu下调整SWAP交换空间</div></div><div class="info-2"><div class="info-item-1">SWAP 分区可以在系统运行内存不足时将一部分未使用的内存文件转存在此分区以减轻动态内存的压力，SWAP 分区以专用的 SWAP 格式存在于硬盘当中。下面将介绍在 Ubuntu 中如何调整 SWAP 分区的空间及 SWAP 分区的活跃度。 创建 SWAP 分区检查是否已启用 SWAP 空间1$ sudo swapon --show #未启用SWAP分区的话，执行此命令将不会有任何输出 创建 SWAP 文件在添加 SWAP 文件时，建议创建的文件大小为实际物理内存的 2-3 倍。 123$ sudo fallocate -l 2G /swapfile #创建大小依据实际物理内存大小自行调整#或使用dd命令创建$ sudo dd if=/dev/zero of=/swapfile bs=512M count=4 创建完成后，给与 SWAP 文件 600 权限 1$ sudo chmod 600 /swapfile 标注 SWAP 区域 1$ sudo mkswap /swapfile 激活 SWAP 分区 1$ sudo swapon /swapfile ...</div></div></div></a><a class="pagination-related" href="/posts/33cfc403/" title="Pm2作为进程辅助管理器的简单使用"><img class="cover" src="/imgs/loading.gif" data-lazy-src="https://srto.win/asst/imgs/pm2-logo.webp" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="fas fa-history fa-fw"></i> 2020-01-23</div><div class="info-item-2">Pm2作为进程辅助管理器的简单使用</div></div><div class="info-2"><div class="info-item-1">Pm2 是一个依赖于 Node 的进程管理器，可以自动管理应用的运行并自动配置负载均衡，具有运行监控、自动启动等特性，非常使用于 Issa 构架的应用程序，也可以在系统中用于独立应用程序的运行管理。 安装 Pm2 由于 Pm2 依赖于 NodeJs 运行，且需要 Node 的版本&gt;&#x3D;8.0,所以需要提前确定本地环境的 NodeJs 版本，可以参考此处，对于还未安装 NodeJs 的运行环境，请看这里。 在控制台输入sudo npm install pm2@latest -g或sudo yarn global add pm2即可完成 Pm2 的安装。 使用 Pm2 来管理应用程序先使用 Pm2 拉起程序控制台运行以下命令(可按照需求加上 sudo) 1234$ pm2 start urapp #这里将要加入管理的应用地址写入到urapp位置即可$ pm2 start app -i 4 # cluster mode 模式启动4个app.js的应用实例会自动进行负载均衡$ pm2 start app --name=&...</div></div></div></a></div></div><hr class="custom-hr"><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i> <span>评论</span></div></div><div class="comment-wrap"><div><div id="waline-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/imgs/loading.gif" data-lazy-src="/asst/imgs/avatar.webp" onerror='this.onerror=null,this.src="/imgs/friend_404.gif"' alt="avatar"></div><div class="author-info-name">雪豹</div><div class="author-info-description">雪豹妙妙屋</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">34</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">63</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">10</div></a></div><a id="card-info-btn" href="https://github.com/useblue" rel="external nofollow noreferrer"><i class="fab fa-github"></i><span>Follow On Github</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://hub.srto.win" target="_blank" title="Github"><i class="fab fa-github-alt" style="color:#24292e"></i></a><a class="social-icon" href="mailto:blog@srto.win" target="_blank" title="Email"><i class="fas fa-envelope" style="color:#4a7dbe"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title="RSS"><i class="fas fa-rss"></i></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-iptables"><span class="toc-number">1.</span> <span class="toc-text">安装 iptables</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-netstat-%E6%8E%92%E6%9F%A5%E6%B5%81%E9%87%8F"><span class="toc-number">2.</span> <span class="toc-text">使用 netstat 排查流量</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A3%80%E6%9F%A5%E7%89%B9%E5%AE%9A%E7%AB%AF%E5%8F%A3%E7%9A%84-ip-%E8%BF%9E%E6%8E%A5%E6%83%85%E5%86%B5"><span class="toc-number">2.1.</span> <span class="toc-text">检查特定端口的 ip 连接情况</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%A8%E9%83%A8%E8%BF%9E%E6%8E%A5%E6%83%85%E5%86%B5"><span class="toc-number">2.2.</span> <span class="toc-text">全部连接情况</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-iptables-%E5%B1%8F%E8%94%BD%E7%89%B9%E5%AE%9A%E8%AE%BF%E9%97%AE"><span class="toc-number">3.</span> <span class="toc-text">使用 iptables 屏蔽特定访问</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%98%BE%E7%A4%BA%E5%BD%93%E5%89%8D%E7%9A%84%E9%98%B2%E7%81%AB%E5%A2%99%E8%A7%84%E5%88%99"><span class="toc-number">3.1.</span> <span class="toc-text">显示当前的防火墙规则</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B1%8F%E8%94%BD%E7%89%B9%E5%AE%9A-ip"><span class="toc-number">3.2.</span> <span class="toc-text">屏蔽特定 ip</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B1%8F%E8%94%BD%E4%B8%80%E6%9D%A1-ip-%E6%AE%B5"><span class="toc-number">3.3.</span> <span class="toc-text">屏蔽一条 ip 段</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%87%8A%E6%94%BE%E5%B1%8F%E8%94%BD%E7%9A%84-ip"><span class="toc-number">3.4.</span> <span class="toc-text">释放屏蔽的 ip</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%98%B2%E7%81%AB%E5%A2%99%E6%93%8D%E4%BD%9C"><span class="toc-number">3.5.</span> <span class="toc-text">防火墙操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#iptables-%E5%B8%AE%E5%8A%A9"><span class="toc-number">3.6.</span> <span class="toc-text">iptables 帮助</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/fd031645/" title=".pipe(gulp.dest 破坏源文件格式"><img src="/imgs/loading.gif" data-lazy-src="/asst/imgs/bp-4.webp" onerror='this.onerror=null,this.src="/imgs/404.svg"' alt=".pipe(gulp.dest 破坏源文件格式"></a><div class="content"><a class="title" href="/posts/fd031645/" title=".pipe(gulp.dest 破坏源文件格式">.pipe(gulp.dest 破坏源文件格式</a><time datetime="2024-04-28T12:23:25.000Z" title="更新于 2024-04-28 12:23:25">2024-04-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/9265190/" title="Windows10/Windows11 开启S/SE模式"><img src="/imgs/loading.gif" data-lazy-src="/asst/imgs/bp-1.webp" onerror='this.onerror=null,this.src="/imgs/404.svg"' alt="Windows10/Windows11 开启S/SE模式"></a><div class="content"><a class="title" href="/posts/9265190/" title="Windows10/Windows11 开启S/SE模式">Windows10/Windows11 开启S/SE模式</a><time datetime="2022-01-18T22:26:31.000Z" title="更新于 2022-01-18 22:26:31">2022-01-18</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/fc9a69d4/" title="Win11 手动安装Windows SubSystem For Android (WSA)"><img src="/imgs/loading.gif" data-lazy-src="/asst/imgs/bp-5.webp" onerror='this.onerror=null,this.src="/imgs/404.svg"' alt="Win11 手动安装Windows SubSystem For Android (WSA)"></a><div class="content"><a class="title" href="/posts/fc9a69d4/" title="Win11 手动安装Windows SubSystem For Android (WSA)">Win11 手动安装Windows SubSystem For Android (WSA)</a><time datetime="2021-11-04T22:35:55.000Z" title="更新于 2021-11-04 22:35:55">2021-11-04</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/3847493a/" title="Switch Firmwares 13.0.0 with prod.keys"><img src="/imgs/loading.gif" data-lazy-src="https://srto.win/asst/imgs/3847493a.webp" onerror='this.onerror=null,this.src="/imgs/404.svg"' alt="Switch Firmwares 13.0.0 with prod.keys"></a><div class="content"><a class="title" href="/posts/3847493a/" title="Switch Firmwares 13.0.0 with prod.keys">Switch Firmwares 13.0.0 with prod.keys</a><time datetime="2021-10-04T19:28:53.000Z" title="更新于 2021-10-04 19:28:53">2021-10-04</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/c8656f1d/" title="Hexo的SEO优化-配置文章自动推送到百度蜘蛛"><img src="/imgs/loading.gif" data-lazy-src="https://srto.win/asst/imgs/c8656f1d.webp" onerror='this.onerror=null,this.src="/imgs/404.svg"' alt="Hexo的SEO优化-配置文章自动推送到百度蜘蛛"></a><div class="content"><a class="title" href="/posts/c8656f1d/" title="Hexo的SEO优化-配置文章自动推送到百度蜘蛛">Hexo的SEO优化-配置文章自动推送到百度蜘蛛</a><time datetime="2021-07-31T14:23:47.000Z" title="更新于 2021-07-31 14:23:47">2021-07-31</time></div></div></div></div><div class="card-widget ads-wrap"><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4338323940841689" data-ad-slot="2529608922" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div></div></div></main><footer id="footer" style="background:0 0"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2025 By 雪豹</span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="前往评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=5.5.0"></script><script src="/js/main.js?v=5.5.0"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fancyapps-ui/6.0.29/fancybox/fancybox.umd.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/instant.page/5.2.0/instantpage.min.js" type="module"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/19.1.3/lazyload.iife.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/node-snackbar/0.1.16/snackbar.min.js"></script><div class="js-pjax"><script>(()=>{let e=window.walineFn||null;const n="shuoshuo"===GLOBAL_CONFIG_SITE.pageType,t={requiredMeta:["nick","mail"],login:"enable",search:"false",turnstileKey:"0x4AAAAAAADH4pc0HpAqUnCi",reaction:"false",emoji:["https://cdn.jsdelivr.net/npm/@waline/emojis@latest/weibo/"]},i=(e,i=document,a=window.location.pathname)=>{const o=e({el:i.querySelector("#waline-wrap"),serverURL:"https://disc.srto.win",pageview:!1,dark:'html[data-theme="dark"]',comment:!1,...t,path:n?a:t&&t.path||a});n&&(window.shuoshuoComment.destroyWaline=()=>{o.destroy(),i.children.length&&(i.innerHTML="",i.classList.add("no-comment"))})},a=(n,t)=>{e?i(e,n,t):btf.getCSS("https://cdnjs.cloudflare.com/ajax/libs/waline/3.6.0/waline.min.css").then((()=>import("https://cdnjs.cloudflare.com/ajax/libs/waline/3.6.0/waline.min.js"))).then((({init:a})=>{e=a||Waline.init,i(e,n,t),window.walineFn=e}))};n?window.shuoshuoComment={loadComment:a}:setTimeout(a,0)})()</script></div><script async src="//at.alicdn.com/t/font_2264842_3izu8i5eoc2.js"></script><script>function showNotification(){if(GLOBAL_CONFIG.Snackbar){var t="light"===document.documentElement.getAttribute("data-theme")?GLOBAL_CONFIG.Snackbar.bgLight:GLOBAL_CONFIG.Snackbar.bgDark,e=GLOBAL_CONFIG.Snackbar.position;Snackbar.show({text:"✨ 有新的内容可供查看 👉",backgroundColor:t,duration:5e5,pos:e,actionText:"点击刷新",actionTextColor:"#fff",onActionClick:function(t){location.reload()}})}else{var o=`top: 0; background: ${"light"===document.documentElement.getAttribute("data-theme")?"#9F79EE":"#1f1f1f"};`;document.getElementById("app-refresh").style.cssText=o}}"serviceWorker"in navigator&&(navigator.serviceWorker.controller&&navigator.serviceWorker.addEventListener("controllerchange",(function(){showNotification()})),window.addEventListener("load",(function(){navigator.serviceWorker.register("/sw.js")})))</script><div id="algolia-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><i class="fas fa-spinner fa-pulse" id="loading-status" hidden></i><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div id="algolia-search-input"><div class="ais-SearchBox"><form class="ais-SearchBox-form" action="" role="search" novalidate><input class="ais-SearchBox-input" type="search" placeholder="搜索内容" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" maxlength="512" aria-label="Search"><button class="ais-SearchBox-submit" type="submit" title="Submit the search query" style="display:none"><svg class="ais-SearchBox-submitIcon" width="10" height="10" viewBox="0 0 40 40" aria-hidden="true"><path d="M26.804 29.01c-2.832 2.34-6.465 3.746-10.426 3.746C7.333 32.756 0 25.424 0 16.378 0 7.333 7.333 0 16.378 0c9.046 0 16.378 7.333 16.378 16.378 0 3.96-1.406 7.594-3.746 10.426l10.534 10.534c.607.607.61 1.59-.004 2.202-.61.61-1.597.61-2.202.004L26.804 29.01zm-10.426.627c7.323 0 13.26-5.936 13.26-13.26 0-7.32-5.937-13.257-13.26-13.257C9.056 3.12 3.12 9.056 3.12 16.378c0 7.323 5.936 13.26 13.258 13.26z"></path></svg></button></form></div><hr><div id="algolia-search-results"><div id="algolia-hits"><div id="algolia-hits-empty" style="display:none"></div><div class="ais-Hits" style="display:none"><ol class="ais-Hits-list"></ol></div></div><div class="ais-Pagination" id="algolia-pagination" style="display:none"><ul class="ais-Pagination-list"></ul></div><div id="algolia-info"><span class="ais-Stats-text"></span><a class="algolia-poweredBy" href="https://www.algolia.com/?utm_source=algoliasearch.js&amp;utm_medium=website&amp;utm_content=localhost&amp;utm_campaign=poweredby" target="_blank" aria-label="Search by Algolia" rel="noopener noreferrer"><svg class="ais-PoweredBy-logo" height="1.2em" viewBox="0 0 572 64" style="width:auto"><path fill="#36395A" d="M16 48.3c-3.4 0-6.3-.6-8.7-1.7A12.4 12.4 0 0 1 1.9 42C.6 40 0 38 0 35.4h6.5a6.7 6.7 0 0 0 3.9 6c1.4.7 3.3 1.1 5.6 1.1 2.2 0 4-.3 5.4-1a7 7 0 0 0 3-2.4 6 6 0 0 0 1-3.4c0-1.5-.6-2.8-1.9-3.7-1.3-1-3.3-1.6-5.9-1.8l-4-.4c-3.7-.3-6.6-1.4-8.8-3.4a10 10 0 0 1-3.3-7.9c0-2.4.6-4.6 1.8-6.4a12 12 0 0 1 5-4.3c2.2-1 4.7-1.6 7.5-1.6s5.5.5 7.6 1.6a12 12 0 0 1 5 4.4c1.2 1.8 1.8 4 1.8 6.7h-6.5a6.4 6.4 0 0 0-3.5-5.9c-1-.6-2.6-1-4.4-1s-3.2.3-4.4 1c-1.1.6-2 1.4-2.6 2.4-.5 1-.8 2-.8 3.1a5 5 0 0 0 1.5 3.6c1 1 2.6 1.7 4.7 1.9l4 .3c2.8.2 5.2.8 7.2 1.8 2.1 1 3.7 2.2 4.9 3.8a9.7 9.7 0 0 1 1.7 5.8c0 2.5-.7 4.7-2 6.6a13 13 0 0 1-5.6 4.4c-2.4 1-5.2 1.6-8.4 1.6Zm35.6 0c-2.6 0-4.8-.4-6.7-1.3a13 13 0 0 1-4.7-3.5 17.1 17.1 0 0 1-3.6-10.4v-1c0-2 .3-3.8 1-5.6a13 13 0 0 1 7.3-8.3 15 15 0 0 1 6.3-1.4A13.2 13.2 0 0 1 64 24.3c1 2.2 1.6 4.6 1.6 7.2V34H39.4v-4.3h21.8l-1.8 2.2c0-2-.3-3.7-.9-5.1a7.3 7.3 0 0 0-2.7-3.4c-1.2-.7-2.7-1.1-4.6-1.1s-3.4.4-4.7 1.3a8 8 0 0 0-2.9 3.6c-.6 1.5-.9 3.3-.9 5.4 0 2 .3 3.7 1 5.3a7.9 7.9 0 0 0 2.8 3.7c1.3.8 3 1.3 5 1.3s3.8-.5 5.1-1.3c1.3-1 2.1-2 2.4-3.2h6a11.8 11.8 0 0 1-7 8.7 16 16 0 0 1-6.4 1.2ZM80 48c-2.2 0-4-.3-5.7-1a8.4 8.4 0 0 1-3.7-3.3 9.7 9.7 0 0 1-1.3-5.2c0-2 .5-3.8 1.5-5.2a9 9 0 0 1 4.3-3.1c1.8-.7 4-1 6.7-1H89v4.1h-7.5c-2 0-3.4.5-4.4 1.4-1 1-1.6 2.1-1.6 3.6s.5 2.7 1.6 3.6c1 1 2.5 1.4 4.4 1.4 1.1 0 2.2-.2 3.2-.7 1-.4 1.9-1 2.6-2 .6-1 1-2.4 1-4.2l1.7 2.1c-.2 2-.7 3.8-1.5 5.2a9 9 0 0 1-3.4 3.3 12 12 0 0 1-5.3 1Zm9.5-.7v-8.8h-1v-10c0-1.8-.5-3.2-1.4-4.1-1-1-2.4-1.4-4.2-1.4a142.9 142.9 0 0 0-10.2.4v-5.6a74.8 74.8 0 0 1 8.6-.4c3 0 5.5.4 7.5 1.2s3.4 2 4.4 3.6c1 1.7 1.4 4 1.4 6.7v18.4h-5Zm12.9 0V17.8h5v12.3h-.2c0-4.2 1-7.4 2.8-9.5a11 11 0 0 1 8.3-3.1h1v5.6h-2a9 9 0 0 0-6.3 2.2c-1.5 1.5-2.2 3.6-2.2 6.4v15.6h-6.4Zm34.4 1a15 15 0 0 1-6.6-1.3c-1.9-.9-3.4-2-4.7-3.5a15.5 15.5 0 0 1-2.7-5c-.6-1.7-1-3.6-1-5.4v-1c0-2 .4-3.8 1-5.6a15 15 0 0 1 2.8-4.9c1.3-1.5 2.8-2.6 4.6-3.5a16.4 16.4 0 0 1 13.3.2c2 1 3.5 2.3 4.8 4a12 12 0 0 1 2 6H144c-.2-1.6-1-3-2.2-4.1a7.5 7.5 0 0 0-5.2-1.7 8 8 0 0 0-4.7 1.3 8 8 0 0 0-2.8 3.6 13.8 13.8 0 0 0 0 10.3c.6 1.5 1.5 2.7 2.8 3.6s2.8 1.3 4.8 1.3c1.5 0 2.7-.2 3.8-.8a7 7 0 0 0 2.6-2c.7-1 1-2 1.2-3.2h6.2a11 11 0 0 1-2 6.2 15.1 15.1 0 0 1-11.8 5.5Zm19.7-1v-40h6.4V31h-1.3c0-3 .4-5.5 1.1-7.6a9.7 9.7 0 0 1 3.5-4.8A9.9 9.9 0 0 1 172 17h.3c3.5 0 6 1.1 7.9 3.5 1.7 2.3 2.6 5.7 2.6 10v16.8h-6.4V29.6c0-2.1-.6-3.8-1.8-5a6.4 6.4 0 0 0-4.8-1.8c-2 0-3.7.7-5 2a7.8 7.8 0 0 0-1.9 5.5v17h-6.4Zm63.8 1a12.2 12.2 0 0 1-10.9-6.2 19 19 0 0 1-1.8-7.3h1.4v12.5h-5.1v-40h6.4v19.8l-2 3.5c.2-3.1.8-5.7 1.9-7.7a11 11 0 0 1 4.4-4.5c1.8-1 3.9-1.5 6.1-1.5a13.4 13.4 0 0 1 12.8 9.1c.7 1.9 1 3.8 1 6v1c0 2.2-.3 4.1-1 6a13.6 13.6 0 0 1-13.2 9.4Zm-1.2-5.5a8.4 8.4 0 0 0 7.9-5c.7-1.5 1.1-3.3 1.1-5.3s-.4-3.8-1.1-5.3a8.7 8.7 0 0 0-3.2-3.6 9.6 9.6 0 0 0-9.2-.2 8.5 8.5 0 0 0-3.3 3.2c-.8 1.4-1.3 3-1.3 5v2.3a9 9 0 0 0 1.3 4.8 9 9 0 0 0 3.4 3c1.4.7 2.8 1 4.4 1Zm27.3 3.9-10-28.9h6.5l9.5 28.9h-6Zm-7.5 12.2v-5.7h4.9c1 0 2-.1 2.9-.4a4 4 0 0 0 2-1.4c.4-.7.9-1.6 1.2-2.7l8.6-30.9h6.2l-9.3 32.4a14 14 0 0 1-2.5 5 8.9 8.9 0 0 1-4 2.8c-1.5.6-3.4.9-5.6.9h-4.4Zm9-12.2v-5.2h6.4v5.2H248Z"></path><path fill="#003DFF" d="M534.4 9.1H528a.8.8 0 0 1-.7-.7V1.8c0-.4.2-.7.6-.8l6.5-1c.4 0 .8.2.9.6v7.8c0 .4-.4.7-.8.7zM428 35.2V.8c0-.5-.3-.8-.7-.8h-.2l-6.4 1c-.4 0-.7.4-.7.8v35c0 1.6 0 11.8 12.3 12.2.5 0 .8-.4.8-.8V43c0-.4-.3-.7-.6-.8-4.5-.5-4.5-6-4.5-7zm106.5-21.8H528c-.4 0-.7.4-.7.8v34c0 .4.3.8.7.8h6.5c.4 0 .8-.4.8-.8v-34c0-.5-.4-.8-.8-.8zm-17.7 21.8V.8c0-.5-.3-.8-.8-.8l-6.5 1c-.4 0-.7.4-.7.8v35c0 1.6 0 11.8 12.3 12.2.4 0 .8-.4.8-.8V43c0-.4-.3-.7-.7-.8-4.4-.5-4.4-6-4.4-7zm-22.2-20.6a16.5 16.5 0 0 1 8.6 9.3c.8 2.2 1.3 4.8 1.3 7.5a19.4 19.4 0 0 1-4.6 12.6 14.8 14.8 0 0 1-5.2 3.6c-2 .9-5.2 1.4-6.8 1.4a21 21 0 0 1-6.7-1.4 15.4 15.4 0 0 1-8.6-9.3 21.3 21.3 0 0 1 0-14.4 15.2 15.2 0 0 1 8.6-9.3c2-.8 4.3-1.2 6.7-1.2s4.6.4 6.7 1.2zm-6.7 27.6c2.7 0 4.7-1 6.2-3s2.2-4.3 2.2-7.8-.7-6.3-2.2-8.3-3.5-3-6.2-3-4.7 1-6.1 3c-1.5 2-2.2 4.8-2.2 8.3s.7 5.8 2.2 7.8 3.5 3 6.2 3zm-88.8-28.8c-6.2 0-11.7 3.3-14.8 8.2a18.6 18.6 0 0 0 4.8 25.2c1.8 1.2 4 1.8 6.2 1.7s.1 0 .1 0h.9c4.2-.7 8-4 9.1-8.1v7.4c0 .4.3.7.8.7h6.4a.7.7 0 0 0 .7-.7V14.2c0-.5-.3-.8-.7-.8h-13.5zm6.3 26.5a9.8 9.8 0 0 1-5.7 2h-.5a10 10 0 0 1-9.2-14c1.4-3.7 5-6.3 9-6.3h6.4v18.3zm152.3-26.5h13.5c.5 0 .8.3.8.7v33.7c0 .4-.3.7-.8.7h-6.4a.7.7 0 0 1-.8-.7v-7.4c-1.2 4-4.8 7.4-9 8h-.1a4.2 4.2 0 0 1-.5.1h-.9a10.3 10.3 0 0 1-7-2.6c-4-3.3-6.5-8.4-6.5-14.2 0-3.7 1-7.2 3-10 3-5 8.5-8.3 14.7-8.3zm.6 28.4c2.2-.1 4.2-.6 5.7-2V21.7h-6.3a9.8 9.8 0 0 0-9 6.4 10.2 10.2 0 0 0 9.1 13.9h.5zM452.8 13.4c-6.2 0-11.7 3.3-14.8 8.2a18.5 18.5 0 0 0 3.6 24.3 10.4 10.4 0 0 0 13 .6c2.2-1.5 3.8-3.7 4.5-6.1v7.8c0 2.8-.8 5-2.2 6.3-1.5 1.5-4 2.2-7.5 2.2l-6-.3c-.3 0-.7.2-.8.5l-1.6 5.5c-.1.4.1.8.5 1h.1c2.8.4 5.5.6 7 .6 6.3 0 11-1.4 14-4.1 2.7-2.5 4.2-6.3 4.5-11.4V14.2c0-.5-.4-.8-.8-.8h-13.5zm6.3 8.2v18.3a9.6 9.6 0 0 1-5.6 2h-1a10.3 10.3 0 0 1-8.8-14c1.4-3.7 5-6.3 9-6.3h6.4zM291 31.5A32 32 0 0 1 322.8 0h30.8c.6 0 1.2.5 1.2 1.2v61.5c0 1.1-1.3 1.7-2.2 1l-19.2-17a18 18 0 0 1-11 3.4 18.1 18.1 0 1 1 18.2-14.8c-.1.4-.5.7-.9.6-.1 0-.3 0-.4-.2l-3.8-3.4c-.4-.3-.6-.8-.7-1.4a12 12 0 1 0-2.4 8.3c.4-.4 1-.5 1.6-.2l14.7 13.1v-46H323a26 26 0 1 0 10 49.7c.8-.4 1.6-.2 2.3.3l3 2.7c.3.2.3.7 0 1l-.2.2a32 32 0 0 1-47.2-28.6z"></path></svg></a></div></div></div></div><div id="search-mask"></div><script src="https://cdnjs.cloudflare.com/ajax/libs/algoliasearch/5.37.0/lite/builds/browser.umd.min.js"></script><script src="/js/search/algolia.js?v=5.5.0"></script></div></div></body></html>